<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:coding="clr-namespace:Coding4Fun.Toolkit.Controls;assembly=Coding4Fun.Toolkit.Controls"
    xmlns:Converters="clr-namespace:Coding4Fun.Toolkit.Controls.Converters;assembly=Coding4Fun.Toolkit.Controls"
    xmlns:conv="clr-namespace:PhotoNote.Conversion"
    xmlns:vm="clr-namespace:PhotoNote.ViewModel"
    xmlns:controls="clr-namespace:PhotoNote.Controls"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" xmlns:eim="clr-namespace:Microsoft.Expression.Interactivity.Media;assembly=Microsoft.Expression.Interactions"
    x:Class="PhotoNote.Pages.EditPage"
    SupportedOrientations="PortraitOrLandscape" Orientation="Landscape"
    mc:Ignorable="d">

    <!-- REMOVED BECAUSE IT CAUSES BAD INK PERFORMANCE!
    <toolkit:TransitionService.NavigationInTransition>
        <toolkit:NavigationInTransition>
            <toolkit:NavigationInTransition.Backward>
                <toolkit:SlideTransition Mode="SlideUpFadeIn"/>
            </toolkit:NavigationInTransition.Backward>
            <toolkit:NavigationInTransition.Forward>
                <toolkit:SlideTransition Mode="SlideUpFadeIn"/>
            </toolkit:NavigationInTransition.Forward>
        </toolkit:NavigationInTransition>
    </toolkit:TransitionService.NavigationInTransition>
    <toolkit:TransitionService.NavigationOutTransition>
        <toolkit:NavigationOutTransition>
            <toolkit:NavigationOutTransition.Backward>
                <toolkit:SlideTransition Mode="SlideDownFadeOut"/>
            </toolkit:NavigationOutTransition.Backward>
            <toolkit:NavigationOutTransition.Forward>
                <toolkit:SlideTransition Mode="SlideDownFadeOut"/>
            </toolkit:NavigationOutTransition.Forward>
        </toolkit:NavigationOutTransition>
    </toolkit:TransitionService.NavigationOutTransition>-->

    <phone:PhoneApplicationPage.Resources>
        <vm:FontsViewModel x:Key="FontsViewModel" />
        <Converters:SolidColorBrushToColorConverter x:Key="BrushToBrush"/>
        <SolidColorBrush x:Key="DefaultDisabledBrush" Color="{Binding Converter={StaticResource BrushToBrush}, Source={StaticResource PhoneDisabledBrush}}"/>
		<Style x:Key="CustomColorPickerStyle" TargetType="coding:ColorPicker">
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="coding:ColorPicker">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>
							<Grid.RowDefinitions>
								<RowDefinition Height="Auto"/>
								<RowDefinition Height="*"/>
							</Grid.RowDefinitions>
							<VisualStateManager.VisualStateGroups>
								<VisualStateGroup x:Name="CommonStates">
									<VisualState x:Name="Normal"/>
									<VisualState x:Name="Disabled">
										<Storyboard>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedHueColor">
												<DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SampleSelector">
												<DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SelectedColor">
												<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DefaultDisabledBrush}"/>
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualState>
								</VisualStateGroup>
							</VisualStateManager.VisualStateGroups>
							<Rectangle x:Name="SelectedColor" Grid.ColumnSpan="2" Fill="{TemplateBinding SolidColorBrush}" Height="24" Margin="0,0,0,12" Grid.Row="0" Visibility="Collapsed"/>
							<coding:ColorSlider x:Name="ColorSlider" IsColorVisible="false" Margin="0,0,12,0" Grid.Row="2" Thumb="{TemplateBinding Thumb}" Width="24"/>
							<Grid x:Name="Body" Grid.Column="1" Grid.Row="1">
								<Rectangle x:Name="SelectedHueColor" Fill="Red"/>
								<Rectangle>
									<Rectangle.Fill>
										<LinearGradientBrush EndPoint="1,0" StartPoint="0,0">
											<GradientStop Color="White" Offset="0"/>
											<GradientStop Color="Transparent" Offset="1"/>
										</LinearGradientBrush>
									</Rectangle.Fill>
								</Rectangle>
								<Rectangle>
									<Rectangle.Fill>
										<LinearGradientBrush EndPoint="0, 0" StartPoint="0,1">
											<GradientStop Color="Black" Offset="0"/>
											<GradientStop Color="Transparent" Offset="1"/>
										</LinearGradientBrush>
									</Rectangle.Fill>
								</Rectangle>
								<Grid x:Name="SampleSelector" HorizontalAlignment="Left" VerticalAlignment="Top">
									<Ellipse Height="22" Stroke="Black" StrokeThickness="5" Width="22"/>
									<Ellipse Height="24" Stroke="White" StrokeThickness="3" Width="24"/>
								</Grid>
							</Grid>
						</Grid>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
		<Style x:Key="CustomSliderStyle" TargetType="Slider">
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="BorderBrush" Value="Transparent"/>
			<Setter Property="Maximum" Value="10"/>
			<Setter Property="Minimum" Value="0"/>
			<Setter Property="Value" Value="0"/>
			<Setter Property="Background" Value="{StaticResource PhoneChromeBrush}"/>
			<Setter Property="Foreground" Value="{StaticResource PhoneAccentBrush}"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Slider">
						<Grid Background="Transparent">
							<VisualStateManager.VisualStateGroups>
								<VisualStateGroup x:Name="CommonStates">
									<VisualState x:Name="Normal"/>
									<VisualState x:Name="MouseOver"/>
									<VisualState x:Name="Disabled">
										<Storyboard>
											<DoubleAnimation Duration="0" To="0.1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HorizontalTrack"/>
											<DoubleAnimation Duration="0" To="0.1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="VerticalTrack"/>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="HorizontalFill">
												<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalFill">
												<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualState>
								</VisualStateGroup>
							</VisualStateManager.VisualStateGroups>
							<Grid x:Name="HorizontalTemplate" Margin="{StaticResource PhoneHorizontalMargin}">
								<Rectangle x:Name="HorizontalTrack" Fill="{StaticResource PhoneForegroundBrush}" Height="12" IsHitTestVisible="False" Margin="0,22,0,50" Opacity="0.5"/>
								<Rectangle x:Name="HorizontalFill" Fill="{TemplateBinding Foreground}" Height="12" IsHitTestVisible="False" Margin="0,22,0,50">
									<Rectangle.Clip>
										<RectangleGeometry Rect="0, 0, 6, 12"/>
									</Rectangle.Clip>
								</Rectangle>
								<Rectangle x:Name="HorizontalCenterElement" Fill="{StaticResource PhoneForegroundBrush}" HorizontalAlignment="Left" Height="24" Margin="0,16,0,44" Width="12">
									<Rectangle.RenderTransform>
										<TranslateTransform/>
									</Rectangle.RenderTransform>
								</Rectangle>
							</Grid>
							<Grid x:Name="VerticalTemplate" Margin="{StaticResource PhoneVerticalMargin}">
								<Rectangle x:Name="VerticalTrack" IsHitTestVisible="False" Margin="18,0,18,0" Width="12" Fill="{StaticResource PhoneForegroundBrush}" Opacity="0.5"/>
								<Rectangle x:Name="VerticalFill" Fill="{TemplateBinding Foreground}" IsHitTestVisible="False" Margin="18,0,18,0" Width="12">
									<Rectangle.Clip>
										<RectangleGeometry Rect="0, 0, 12, 6"/>
									</Rectangle.Clip>
								</Rectangle>
								<Rectangle x:Name="VerticalCenterElement" Fill="{StaticResource PhoneForegroundBrush}" Height="12" Margin="12,0,12,0" VerticalAlignment="Top" Width="24">
									<Rectangle.RenderTransform>
										<TranslateTransform/>
									</Rectangle.RenderTransform>
								</Rectangle>
							</Grid>
						</Grid>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
		<Style x:Key="PhoneButtonBase" TargetType="ButtonBase">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
			<Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
			<Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
			<Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
			<Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMedium}"/>
			<Setter Property="Padding" Value="10,5,10,6"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="ButtonBase">
						<Grid Background="Transparent">
							<VisualStateManager.VisualStateGroups>
								<VisualStateGroup x:Name="CommonStates">
									<VisualState x:Name="Normal"/>
									<VisualState x:Name="MouseOver"/>
									<VisualState x:Name="Pressed">
										<Storyboard>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
												<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneButtonBasePressedForegroundBrush}"/>
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
												<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneAccentBrush}"/>
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualState>
									<VisualState x:Name="Disabled">
										<Storyboard>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
												<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
												<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
												<DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualState>
								</VisualStateGroup>
							</VisualStateManager.VisualStateGroups>
							<Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="0" Margin="{StaticResource PhoneTouchTargetOverhang}">
								<ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
							</Border>
						</Grid>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
		
        <Style x:Key="CustomToggleButtonStyle" BasedOn="{StaticResource PhoneButtonBase}" TargetType="ToggleButton">
            <Setter Property="Margin" Value="2,3,2,3"/>
            <Setter Property="Padding" Value="2"/>
            <Setter Property="Width" Value="48"/>
            <Setter Property="Height" Value="48"/>
        	<Setter Property="Template">
        		<Setter.Value>
        			<ControlTemplate TargetType="ToggleButton">
        				<Grid Background="Transparent">
        					<VisualStateManager.VisualStateGroups>
        						<VisualStateGroup x:Name="CommonStates">
        							<VisualState x:Name="Normal"/>
        							<VisualState x:Name="Disabled">
        								<Storyboard>
        									<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="EnabledBackground">
        										<DiscreteObjectKeyFrame KeyTime="0">
        											<DiscreteObjectKeyFrame.Value>
        												<Visibility>Collapsed</Visibility>
        											</DiscreteObjectKeyFrame.Value>
        										</DiscreteObjectKeyFrame>
        									</ObjectAnimationUsingKeyFrames>
        									<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="DisabledBackground">
        										<DiscreteObjectKeyFrame KeyTime="0">
        											<DiscreteObjectKeyFrame.Value>
        												<Visibility>Visible</Visibility>
        											</DiscreteObjectKeyFrame.Value>
        										</DiscreteObjectKeyFrame>
        									</ObjectAnimationUsingKeyFrames>
        								</Storyboard>
        							</VisualState>
        						</VisualStateGroup>
        						<VisualStateGroup x:Name="CheckStates">
        							<VisualState x:Name="Unchecked"/>
        							<VisualState x:Name="Checked">
        								<Storyboard>
        									<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="EnabledBackgroundColor">
        										<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
        									</ObjectAnimationUsingKeyFrames>
        									<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="EnabledContent">
        										<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
        									</ObjectAnimationUsingKeyFrames>
        									<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="DisabledBackground">
        										<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
        									</ObjectAnimationUsingKeyFrames>
        									<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="DisabledBackground">
        										<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
        									</ObjectAnimationUsingKeyFrames>
        									<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="DisabledContent">
        										<DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
        									</ObjectAnimationUsingKeyFrames>
        								</Storyboard>
        							</VisualState>
        						</VisualStateGroup>
        					</VisualStateManager.VisualStateGroups>
        					<Border x:Name="EnabledBackgroundColor" Opacity="0.5" Background="{TemplateBinding Background}" Height="{TemplateBinding Height}" Width="{TemplateBinding Width}" />
        					<Border x:Name="EnabledBackground" Height="{TemplateBinding Height}" Width="{TemplateBinding Width}">
        						<ContentControl x:Name="EnabledContent" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
        					</Border>
        					<Border x:Name="DisabledBackground" BorderBrush="{StaticResource PhoneDisabledBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="Transparent" IsHitTestVisible="False" Margin="{StaticResource PhoneTouchTargetOverhang}" Visibility="Collapsed">
        						<ContentControl x:Name="DisabledContent" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{StaticResource PhoneDisabledBrush}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
        					</Border>
        				</Grid>
        			</ControlTemplate>
        		</Setter.Value>
        	</Setter>
		</Style>

        <Style x:Key="CustomListPickerStyle"  TargetType="toolkit:ListPicker">
            <Setter Property="Background" Value="{StaticResource PhoneTextBoxBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource PhoneTextBoxForegroundBrush}"/>
            <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Margin" Value="0,0,0,3"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="toolkit:ListPicker">
                        <StackPanel>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="PickerStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="Expanded">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames 
                                            Storyboard.TargetName="Border" 
                                            Storyboard.TargetProperty="Background" 
                                            Duration="0">
                                                <DiscreteObjectKeyFrame 
                                                Value="{StaticResource PhoneTextBoxEditBackgroundColor}" 
                                                KeyTime="0"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames 
                                            Storyboard.TargetName="Border" 
                                            Storyboard.TargetProperty="BorderBrush" 
                                            Duration="0">
                                                <DiscreteObjectKeyFrame 
                                                Value="{StaticResource PhoneTextBoxEditBorderBrush}" 
                                                KeyTime="0"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid>
                                <Border 
                                x:Name="Border" 
                                Background="{TemplateBinding Background}" >
                                    <Grid x:Name="ItemsPresenterHost">
                                        <ItemsPresenter x:Name="ItemsPresenter" Margin="0,-4,0,0">
                                            <ItemsPresenter.RenderTransform>
                                                <TranslateTransform x:Name="ItemsPresenterTranslateTransform"/>
                                            </ItemsPresenter.RenderTransform>
                                        </ItemsPresenter>
                                    </Grid>
                                </Border>
                                <Popup x:Name="FullModePopup">
                                    <Border Background="{StaticResource PhoneChromeBrush}">
                                        <!-- Popup.Child should always be a Border -->
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition/>
                                            </Grid.RowDefinitions>
                                            <ContentControl 
                                            Grid.Row="0" 
                                            Content="{TemplateBinding FullModeHeader}" 
                                            Foreground="{StaticResource PhoneForegroundBrush}" 
                                            FontFamily="{StaticResource PhoneFontFamilySemiBold}" 
                                            FontSize="{StaticResource PhoneFontSizeMedium}" 
                                            HorizontalAlignment="Left" 
                                            Margin="24 12 0 0"/>
                                            <ListBox 
                                            x:Name="FullModeSelector" 
                                            Grid.Row="1" 
                                            
                                            FontSize="{TemplateBinding FontSize}" 
                                            Margin="{StaticResource PhoneMargin}">
                                                <ListBox.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel/>
                                                        <!-- Ensures all containers will be available during the Loaded event -->
                                                    </ItemsPanelTemplate>
                                                </ListBox.ItemsPanel>
                                            </ListBox>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </Grid>
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!--ItemTemplate="{TemplateBinding ActualFullModeItemTemplate}"-->

        <Storyboard x:Name="CloseZoomingPopup">
            <DoubleAnimation Duration="0:0:1" To="-400" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="ZoomingPopup" d:IsOptimized="True">
                <DoubleAnimation.EasingFunction>
                    <BackEase Amplitude="0.2" EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="ZoomingPopup">
                <DiscreteObjectKeyFrame KeyTime="0:0:1">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Collapsed</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Name="ShowZoomingPopup">
            <DoubleAnimation Duration="0:0:1" To="-32" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="ZoomingPopup" d:IsOptimized="True">
                <DoubleAnimation.EasingFunction>
                    <BackEase Amplitude="0.2" EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        	<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="ZoomingPopup">
                <DiscreteObjectKeyFrame KeyTime="0">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Visible</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Name="ShowTextOptionsAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="TextOptions">
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1">
        			<EasingDoubleKeyFrame.EasingFunction>
        				<CircleEase EasingMode="EaseInOut"/>
        			</EasingDoubleKeyFrame.EasingFunction>
        		</EasingDoubleKeyFrame>
        	</DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="TextOptionsLandscape">
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)" Storyboard.TargetName="TextOptions" d:IsOptimized="True">
                <DiscreteDoubleKeyFrame KeyTime="0" Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="TextOptionsLandscape" d:IsOptimized="True">
                <DiscreteDoubleKeyFrame KeyTime="0" Value="0" />
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Name="HideTextOptionsAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="TextOptions">
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="TextOptionsLandscape">
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)" Storyboard.TargetName="TextOptions" d:IsOptimized="True">
                <DiscreteDoubleKeyFrame KeyTime="0:0:0.5" Value="-1000" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="TextOptionsLandscape" d:IsOptimized="True">
                <DiscreteDoubleKeyFrame KeyTime="0:0:0.5" Value="-1000" />
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Name="CropEnabledAnimation">
        	<DoubleAnimation Duration="0:0:1" To="0.8" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="RenderContainer" d:IsOptimized="True">
        		<DoubleAnimation.EasingFunction>
        			<CircleEase EasingMode="EaseInOut"/>
        		</DoubleAnimation.EasingFunction>
        	</DoubleAnimation>
        	<DoubleAnimation Duration="0:0:1" To="0.8" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="RenderContainer" d:IsOptimized="True">
        		<DoubleAnimation.EasingFunction>
        			<CircleEase EasingMode="EaseInOut"/>
        		</DoubleAnimation.EasingFunction>
        	</DoubleAnimation>
            <DoubleAnimation Duration="0:0:0.5" BeginTime="0:0:0.5" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="CropRectsContainer" d:IsOptimized="True">
                <DoubleAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="CropRectsContainer">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Visible</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="CropText">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Visible</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Name="CropDisabledAnimation">
            <DoubleAnimation Duration="0:0:1" To="1" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="RenderContainer" d:IsOptimized="True">
                <DoubleAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Duration="0:0:1" To="1" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="RenderContainer" d:IsOptimized="True">
                <DoubleAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="CropRectsContainer" d:IsOptimized="True">
                <DoubleAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="CropRectsContainer">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Collapsed</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="CropText">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Collapsed</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </phone:PhoneApplicationPage.Resources>
	<phone:PhoneApplicationPage.FontFamily>
		<StaticResource ResourceKey="PhoneFontFamilyNormal"/>
	</phone:PhoneApplicationPage.FontFamily>
	<phone:PhoneApplicationPage.FontSize>
		<StaticResource ResourceKey="PhoneFontSizeNormal"/>
	</phone:PhoneApplicationPage.FontSize>
	<phone:PhoneApplicationPage.Foreground>
		<StaticResource ResourceKey="PhoneForegroundBrush"/>
	</phone:PhoneApplicationPage.Foreground>
<!--LayoutRoot ist das Stammraster, in dem alle anderen Seiteninhalte platziert werden-->
	<Grid x:Name="LayoutRoot" Background="Transparent">
		<Grid.RowDefinitions>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>
		<VisualStateManager.VisualStateGroups>
			<VisualStateGroup x:Name="ApplicationViewStates">
				<VisualState x:Name="Portrait">
					<Storyboard>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PenToolbar" Storyboard.TargetProperty="Visibility">
							<DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
						</ObjectAnimationUsingKeyFrames>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PenToolbarLandscape" Storyboard.TargetProperty="Visibility">
							<DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
						</ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="TextOptions">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Visible</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="TextOptionsLandscape">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Collapsed</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
				</VisualState>
				<VisualState x:Name="LandscapeLeft">
					<Storyboard>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPanel" Storyboard.TargetProperty="Margin">
							<DiscreteObjectKeyFrame KeyTime="0" Value="0,0,72,0"/>
						</ObjectAnimationUsingKeyFrames>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="EditImageContainer" Storyboard.TargetProperty="Width">
							<DiscreteObjectKeyFrame KeyTime="0" Value="728"/>
						</ObjectAnimationUsingKeyFrames>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="EditImageContainer" Storyboard.TargetProperty="Height">
							<DiscreteObjectKeyFrame KeyTime="0" Value="480"/>
						</ObjectAnimationUsingKeyFrames>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PenToolbar" Storyboard.TargetProperty="Visibility">
							<DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
						</ObjectAnimationUsingKeyFrames>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PenToolbarLandscape" Storyboard.TargetProperty="Visibility">
							<DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
						</ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ZoomingPopup" Storyboard.TargetProperty="Margin">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0,0,72,0"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="TextOptions">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Collapsed</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="TextOptionsLandscape">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Visible</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
				</VisualState>
				<VisualState x:Name="LandscapeRight">
					<Storyboard>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPanel" Storyboard.TargetProperty="Margin">
							<DiscreteObjectKeyFrame KeyTime="0" Value="72,0,0,0"/>
						</ObjectAnimationUsingKeyFrames>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="EditImageContainer" Storyboard.TargetProperty="Width">
							<DiscreteObjectKeyFrame KeyTime="0" Value="728"/>
						</ObjectAnimationUsingKeyFrames>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="EditImageContainer" Storyboard.TargetProperty="Height">
							<DiscreteObjectKeyFrame KeyTime="0" Value="480"/>
						</ObjectAnimationUsingKeyFrames>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PenToolbar" Storyboard.TargetProperty="Visibility">
							<DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
						</ObjectAnimationUsingKeyFrames>
						<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PenToolbarLandscape" Storyboard.TargetProperty="Visibility">
							<DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
						</ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ZoomingPopup" Storyboard.TargetProperty="Margin">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="72,0,0,0"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="TextOptions">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Collapsed</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="TextOptionsLandscape">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Visible</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
					</Storyboard>
				</VisualState>
			</VisualStateGroup>
            <VisualStateGroup x:Name="PenToolbarViewStates">
				<VisualState x:Name="Normal">
					<Storyboard>
                        <DoubleAnimation BeginTime="0:0:0.1" Duration="0:0:1" To="600" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="PenToolbar" d:IsOptimized="True">
                            <DoubleAnimation.EasingFunction>
                                <BackEase EasingMode="EaseInOut" Amplitude="0.2"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <DoubleAnimation BeginTime="0:0:0.1" Duration="0:0:1" To="600" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="PenToolbarLandscape" d:IsOptimized="True">
                            <DoubleAnimation.EasingFunction>
                                <BackEase EasingMode="EaseInOut" Amplitude="0.2"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesPenMode" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0:0:1" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesTextMode" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0:0:1" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesPenModeLandscape" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0:0:1" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesTextModeLandscape" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0:0:1" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimation BeginTime="0:0:0.66" Duration="0:0:0.33" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ColorPreview" d:IsOptimized="True">
                        </DoubleAnimation>
                        <DoubleAnimation BeginTime="0:0:0.66" Duration="0:0:0.33" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ColorPreviewLandscape" d:IsOptimized="True">
                        </DoubleAnimation>
					</Storyboard>
				</VisualState>
                <VisualState x:Name="DisplayedPenMode">
                    <Storyboard>
                        <DoubleAnimation BeginTime="0:0:0.1" Duration="0:0:1" To="100" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="PenToolbar" d:IsOptimized="True">
                            <DoubleAnimation.EasingFunction>
                                <BackEase EasingMode="EaseInOut" Amplitude="0.2"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <DoubleAnimation BeginTime="0:0:0.1" Duration="0:0:1" To="100" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="PenToolbarLandscape" d:IsOptimized="True">
                            <DoubleAnimation.EasingFunction>
                                <BackEase EasingMode="EaseInOut" Amplitude="0.2"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesPenMode" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesTextMode" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesPenModeLandscape" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesTextModeLandscape" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ColorPreview" d:IsOptimized="True">
                            <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ColorPreviewLandscape" d:IsOptimized="True">
                            <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
				</VisualState>
                <VisualState x:Name="DisplayedTextMode">
                    <Storyboard>
                        <DoubleAnimation Duration="0:0:1" To="100" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="PenToolbar" d:IsOptimized="True">
                            <DoubleAnimation.EasingFunction>
                                <BackEase EasingMode="EaseInOut" Amplitude="0.2"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <DoubleAnimation Duration="0:0:1" To="100" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="PenToolbarLandscape" d:IsOptimized="True">
                            <DoubleAnimation.EasingFunction>
                                <BackEase EasingMode="EaseInOut" Amplitude="0.2"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesPenMode" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesTextMode" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesPenModeLandscape" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PropertiesTextModeLandscape" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ColorPreview" d:IsOptimized="True">
                            <DiscreteDoubleKeyFrame KeyTime="0" Value="0"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ColorPreviewLandscape" d:IsOptimized="True">
                            <DiscreteDoubleKeyFrame KeyTime="0" Value="0"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
		</VisualStateManager.VisualStateGroups>
        
        <Grid x:Name="RenderingTrash" Height="1" Width="1">
            
        </Grid>

        <!--ContentPanel - zusätzliche Inhalte hier platzieren-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="0,0,0,72" Background="{StaticResource PhoneBackgroundBrush}">
            
            <TextBlock x:Name="CropText" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="12" Text="" FlowDirection="LeftToRight" Visibility="Collapsed"/>

            <Grid x:Name="EditImageContainer" Width="480" Height="728">
                <Grid x:Name="RenderContainer" RenderTransformOrigin="0.5,0.5">
                    <Grid.RenderTransform>
                        <CompositeTransform/>
                    </Grid.RenderTransform>

                    <Image x:Name="EditImageControl" VerticalAlignment="Center" HorizontalAlignment="Center" RenderTransformOrigin="0.5,0.5">
                        <Image.RenderTransform>
                            <CompositeTransform/>
                        </Image.RenderTransform>
                    </Image>   

                    <Canvas x:Name="EditTextControl" VerticalAlignment="Center" HorizontalAlignment="Center" RenderTransformOrigin="0.5,0.5">
                        <Canvas.RenderTransform>
                            <CompositeTransform/>
                        </Canvas.RenderTransform>
                    </Canvas>

                    <InkPresenter x:Name="InkControl" VerticalAlignment="Center" HorizontalAlignment="Center" RenderTransformOrigin="0.5,0.5"
                                  Background="Transparent"
                                  MouseLeftButtonDown="MyIP_MouseLeftButtonDown" 
						          LostMouseCapture="MyIP_LostMouseCapture"
						          MouseMove="MyIP_MouseMove"
                                  ManipulationStarted="MyIP_ManipulationStarted"
						          ManipulationDelta="MyIP_ManipulationDelta"
                                  ManipulationCompleted="MyIP_ManipulationCompleted">
                        <InkPresenter.RenderTransform>
                            <CompositeTransform/>
                        </InkPresenter.RenderTransform>
                    </InkPresenter>

                    <Canvas x:Name="CroppingControl" VerticalAlignment="Center" HorizontalAlignment="Center" RenderTransformOrigin="0.5,0.5"
                            Background="{StaticResource PhoneBackgroundBrush}" Opacity="0.8" FlowDirection="LeftToRight">
                        <Canvas.RenderTransform>
                            <CompositeTransform/>
                        </Canvas.RenderTransform>
                        <Canvas.Clip>
                            <GeometryGroup>
                                <RectangleGeometry x:Name="ClipRectLeft"></RectangleGeometry>
                                <RectangleGeometry x:Name="ClipRectRight"></RectangleGeometry>
                                <RectangleGeometry x:Name="ClipRectTop"></RectangleGeometry>
                                <RectangleGeometry x:Name="ClipRectBottom"></RectangleGeometry>
                            </GeometryGroup>
                        </Canvas.Clip>
                    </Canvas>

                    <!-- must be deactived when marker is active to not steal the events -->
                    <Canvas x:Name="InputControl" VerticalAlignment="Center" HorizontalAlignment="Center" RenderTransformOrigin="0.5,0.5"
                            Background="Transparent" Visibility="Collapsed"
                            ManipulationStarted="MyIP_ManipulationStarted"
						    ManipulationDelta="MyIP_ManipulationDelta"
                            ManipulationCompleted="MyIP_ManipulationCompleted">
                        <Canvas.RenderTransform>
                            <CompositeTransform/>
                        </Canvas.RenderTransform>
                    </Canvas>

                    <Grid x:Name="CropRectsContainer" Visibility="Collapsed" Opacity="0" FlowDirection="LeftToRight">
                        <Grid.RenderTransform>
                            <CompositeTransform/>
                        </Grid.RenderTransform>
                        <Rectangle Name="CropRectTopLeft" Width="40" Height="40" Margin="-20" Fill="{StaticResource PhoneAccentBrush}" HorizontalAlignment="Left" VerticalAlignment="Top" Stroke="White" StrokeThickness="1">
                            <Rectangle.RenderTransform>
                                <TranslateTransform></TranslateTransform>
                            </Rectangle.RenderTransform>
                        </Rectangle>
                        <Rectangle Name="CropRectTopRight" Width="40" Height="40" Margin="-20" Fill="{StaticResource PhoneAccentBrush}" HorizontalAlignment="Right" VerticalAlignment="Top" Stroke="White" StrokeThickness="1">
                            <Rectangle.RenderTransform>
                                <TranslateTransform></TranslateTransform>
                            </Rectangle.RenderTransform>
                        </Rectangle>
                        <Rectangle Name="CropRectBotLeft" Width="40" Height="40" Margin="-20" Fill="{StaticResource PhoneAccentBrush}" HorizontalAlignment="Left" VerticalAlignment="Bottom" Stroke="White" StrokeThickness="1">
                            <Rectangle.RenderTransform>
                                <TranslateTransform></TranslateTransform>
                            </Rectangle.RenderTransform>
                        </Rectangle>
                        <Rectangle Name="CropRectBotRight" Width="40" Height="40" Margin="-20" Fill="{StaticResource PhoneAccentBrush}" HorizontalAlignment="Right" VerticalAlignment="Bottom" Stroke="White" StrokeThickness="1">
                            <Rectangle.RenderTransform>
                                <TranslateTransform></TranslateTransform>
                            </Rectangle.RenderTransform>
                        </Rectangle>
                    </Grid>
                </Grid>
            </Grid>

            <Grid x:Name="PenToolbar" Height="360" VerticalAlignment="Bottom" Background="{StaticResource PhoneChromeBrush}" RenderTransformOrigin="0.5,0.5"  Visibility="Collapsed">
                <Grid.RenderTransform>
                    <CompositeTransform TranslateY="600"/>
                </Grid.RenderTransform>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="220" />
                    <ColumnDefinition Width="260" />
                </Grid.ColumnDefinitions>
                <Button Grid.ColumnSpan="2" VerticalAlignment="Top" HorizontalAlignment="Right" Template="{StaticResource EmptyButtonControlTemplate}" Background="{StaticResource PhoneChromeBrush}" Tap="ClosedPenToobarTapped">
                    <Grid Margin="0,-44,0,0">
                        <Ellipse Width="67" Height="67" Fill="{StaticResource PhoneChromeBrush}"/>
                        <Path Width="28" Height="22" Margin="2" Stretch="Fill" Opacity="0.5" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 37.8516,39.5833L 52.1016,24.9375L 52.1016,35.2292L 37.8516,50.2708L 23.6016,35.2292L 23.6016,24.9375L 37.8516,39.5833 Z "/>
                    </Grid>
                </Button>
                <!-- color -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,16,0,0">
                    <StackPanel Margin="12">
                        <coding:ColorPicker x:Name="ColorPicker" Height="198" Width="164"  Margin="0,12,0,12" Style="{StaticResource CustomColorPickerStyle}" ColorChanged="ColorPickerChanged" />
                    </StackPanel>
                    <StackPanel Margin="-4,20,0,20">
                        <Rectangle x:Name="ColorHistory1" Fill="Red" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle x:Name="ColorHistory2" Fill="Green" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle x:Name="ColorHistory3" Fill="Blue" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle x:Name="ColorHistory4" Fill="Yellow" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle x:Name="ColorHistory5" Fill="Black" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle x:Name="ColorHistory6" Fill="White" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                    </StackPanel>
                </StackPanel>

                <!-- pen mode -->
                <Grid Grid.Column="1" x:Name="PropertiesPenMode" Margin="0,40,0,0" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="118" />
                        <ColumnDefinition Width="142" />
                    </Grid.ColumnDefinitions>

                    <!-- sliders -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center">
                        <StackPanel>
                            <Path Width="28" Height="28" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 19,19L 25.3333,19L 25.3333,25.3333L 31.6667,25.3333L 31.6667,19L 38,19L 38,25.3333L 44.3333,25.3333L 44.3333,19L 50.6667,19L 50.6667,25.3333L 57,25.3333L 57,31.6667L 50.6667,31.6667L 50.6667,38L 57,38L 57,44.3333L 50.6667,44.3333L 50.6667,50.6667L 57,50.6667L 57,57L 50.6667,57L 50.6667,50.6667L 44.3333,50.6667L 44.3333,57L 38,57L 38,50.6667L 31.6667,50.6667L 31.6667,57L 25.3333,57L 25.3333,50.6667L 19,50.6667L 19,44.3333L 25.3333,44.3333L 25.3333,38L 19,38L 19,31.6667L 25.3333,31.6667L 25.3333,25.3333L 19,25.3333L 19,19 Z M 50.6667,38L 44.3333,38L 44.3333,44.3333L 50.6667,44.3333L 50.6667,38 Z M 50.6667,25.3333L 44.3333,25.3333L 44.3333,31.6667L 50.6667,31.6667L 50.6667,25.3333 Z M 44.3333,44.3333L 38,44.3333L 38,50.6667L 44.3333,50.6667L 44.3333,44.3333 Z M 38,44.3333L 38,38L 31.6667,38L 31.6667,44.3333L 38,44.3333 Z M 31.6667,44.3333L 25.3333,44.3333L 25.3333,50.6667L 31.6667,50.6667L 31.6667,44.3333 Z M 44.3333,31.6667L 38,31.6667L 38,38L 44.3333,38L 44.3333,31.6667 Z M 38,31.6667L 38,25.3333L 31.6667,25.3333L 31.6666,31.6667L 38,31.6667 Z M 31.6666,31.6667L 25.3333,31.6667L 25.3333,38L 31.6667,38L 31.6666,31.6667 Z ">
                                <Path.OpacityMask>
                                    <LinearGradientBrush StartPoint="0.853553,0.853553" EndPoint="0.146447,0.146447">
                                        <GradientStop Color="#22FFFFFF" Offset="0"/>
                                        <GradientStop Color="#FFFFFFFF" Offset="1"/>
                                    </LinearGradientBrush>
                                </Path.OpacityMask>
                            </Path>
                            <Slider x:Name="OpacitySlider" Foreground="{Binding SolidColorBrush, ElementName=ColorPicker}"
							    Minimum="0.1" Maximum="1" SmallChange="0.2" LargeChange="0.1" Orientation="Vertical" Height="184" Width="62" Margin="-3,0,-3,0" VerticalAlignment="Top" Style="{StaticResource CustomSliderStyle}" />
                        </StackPanel>
                        <StackPanel>
                            <Path Width="28" Height="28" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 20.5833,55.4167L 49.0833,55.4167L 45.9167,52.25L 25.3333,52.25L 31.6667,49.0833L 25.3333,42.75L 22.1667,49.875C 22.1667,49.875 15.8333,55.4167 20.5833,55.4167 Z M 36.4166,47.5L 26.9166,38L 26.9166,41.1667L 33.25,47.5L 36.4166,47.5 Z M 28.8958,37.6042L 36.8125,45.5209C 38.3958,47.1042 42.75,42.75 42.75,42.75L 31.6666,31.6667C 26.9166,36.4167 28.8958,37.6042 28.8958,37.6042 Z M 44.3333,41.1667L 65.6868,16.8593C 63.2289,13.6452 60.224,10.8717 56.8112,8.67772L 33.25,30.0834L 44.3333,41.1667 Z "/>
                            <Slider x:Name="ThicknessSlider" Foreground="{Binding SolidColorBrush, ElementName=ColorPicker}"
							Minimum="3" Maximum="42" SmallChange="1" LargeChange="1" Orientation="Vertical" Height="184" Margin="-3,0,-3,0" Width="62" VerticalAlignment="Top" Style="{StaticResource CustomSliderStyle}" />
                        </StackPanel>
                    </StackPanel>

                    <!-- buttons -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <ToggleButton x:Name="NormalPen" Style="{StaticResource CustomToggleButtonStyle}" Tag="Normal" Checked="PenModeToggled" Unchecked="PenModeToggled">
                                    <Path Width="28" Height="28" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 58,18C 58,18 33,24 33,33C 33,42 46,41 46,45C 46,49 22,55 18,56L 19,59C 19,59 49,53 49,45C 49,37 36,40 36,33C 36,26 59,21 59,21L 58,18 Z " StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                                </ToggleButton>
                                <ToggleButton x:Name="ArrowPen" Style="{StaticResource CustomToggleButtonStyle}" Tag="Arrow" Checked="PenModeToggled" Unchecked="PenModeToggled">
                                    <Path Width="28" Height="24" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23,55L 18,55L 18,50L 21,50L 53,24L 53,21L 58,21L 58,26L 55,26L 23,52L 23,55 Z M 54,22L 54,25L 57,25L 57,22L 54,22 Z M 19,51L 19,54L 22,54L 22,51L 19,51 Z M 38,25 52,25 53,24 53,22 38,22 Z M 55,26 54,27 54,41 57,41 57,26 Z" StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                                </ToggleButton>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <ToggleButton x:Name="LinePen" Style="{StaticResource CustomToggleButtonStyle}" Tag="Line" Checked="PenModeToggled" Unchecked="PenModeToggled">
                                    <Path Width="28" Height="24" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23,55L 18,55L 18,50L 21,50L 53,24L 53,21L 58,21L 58,26L 55,26L 23,52L 23,55 Z M 54,22L 54,25L 57,25L 57,22L 54,22 Z M 19,51L 19,54L 22,54L 22,51L 19,51 Z " StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                                </ToggleButton>
                                <ToggleButton x:Name="CirclePen" Style="{StaticResource CustomToggleButtonStyle}" Tag="Circle" Checked="PenModeToggled" Unchecked="PenModeToggled">
                                    <Path Width="28" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 38,36C 36.8954,36 36,36.8954 36,38C 36,39.1046 36.8954,40 38,40C 39.1046,40 40,39.1046 40,38C 40,36.8954 39.1046,36 38,36 Z M 38,34C 40.2091,34 42,35.7909 42,38C 42,40.2091 40.2091,42 38,42C 35.7909,42 34,40.2091 34,38C 34,35.7909 35.7909,34 38,34 Z M 57.75,36C 56.6454,36 55.75,36.8954 55.75,38C 55.75,39.1046 56.6454,40 57.75,40C 58.8546,40 59.75,39.1046 59.75,38C 59.75,36.8954 58.8546,36 57.75,36 Z M 61.75,38C 61.75,39.9038 60.4199,41.497 58.6383,41.901C 56.8098,51.635 48.265,59 38,59C 26.402,59 17,49.598 17,38C 17,26.402 26.402,17 38,17C 48.265,17 56.8098,24.365 58.6383,34.099C 60.4199,34.503 61.75,36.0962 61.75,38 Z M 53.75,38C 53.75,36.5505 54.521,35.281 55.6754,34.5794C 54.0776,26.2741 46.7715,20 38,20C 28.0589,20 20,28.0589 20,38C 20,47.9411 28.0589,56 38,56C 46.7715,56 54.0776,49.7259 55.6754,41.4206C 54.521,40.719 53.75,39.4496 53.75,38 Z " StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                                </ToggleButton>
                            </StackPanel>
                            <ToggleButton x:Name="RectanglePen" HorizontalAlignment="Center" Style="{StaticResource CustomToggleButtonStyle}" Tag="Rectangle" Checked="PenModeToggled" Unchecked="PenModeToggled">
                                <Path Width="28" Height="23" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23,28L 23,29L 22,29L 22,47L 23,47L 23,48L 53,48L 53,47L 54,47L 54,29L 53,29L 53,28L 23,28 Z M 58,47L 58,52L 53,52L 53,51L 23,51L 23,52L 18,52L 18,47L 19,47L 19,29L 18,29L 18,24L 23,24L 23,25L 53,25L 53,24L 58,24L 58,29L 57,29L 57,47L 58,47 Z M 19,25L 19,28L 22,28L 22,25L 19,25 Z M 54,25L 54,28L 57,28L 57,25L 54,25 Z M 19,48L 19,51L 22,51L 22,48L 19,48 Z M 54,48L 54,51L 57,51L 57,48L 54,48 Z " StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                            </ToggleButton>
                        </StackPanel>
                    </StackPanel>
                </Grid>

                <!-- text mode -->
                <Grid x:Name="PropertiesTextMode" Grid.Column="1" Margin="0,40,0,0" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="118" />
                        <ColumnDefinition Width="142" />
                    </Grid.ColumnDefinitions>

                    <!-- sliders -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <StackPanel  HorizontalAlignment="Center">
                            <Path Width="28" Height="28" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 19,19L 25.3333,19L 25.3333,25.3333L 31.6667,25.3333L 31.6667,19L 38,19L 38,25.3333L 44.3333,25.3333L 44.3333,19L 50.6667,19L 50.6667,25.3333L 57,25.3333L 57,31.6667L 50.6667,31.6667L 50.6667,38L 57,38L 57,44.3333L 50.6667,44.3333L 50.6667,50.6667L 57,50.6667L 57,57L 50.6667,57L 50.6667,50.6667L 44.3333,50.6667L 44.3333,57L 38,57L 38,50.6667L 31.6667,50.6667L 31.6667,57L 25.3333,57L 25.3333,50.6667L 19,50.6667L 19,44.3333L 25.3333,44.3333L 25.3333,38L 19,38L 19,31.6667L 25.3333,31.6667L 25.3333,25.3333L 19,25.3333L 19,19 Z M 50.6667,38L 44.3333,38L 44.3333,44.3333L 50.6667,44.3333L 50.6667,38 Z M 50.6667,25.3333L 44.3333,25.3333L 44.3333,31.6667L 50.6667,31.6667L 50.6667,25.3333 Z M 44.3333,44.3333L 38,44.3333L 38,50.6667L 44.3333,50.6667L 44.3333,44.3333 Z M 38,44.3333L 38,38L 31.6667,38L 31.6667,44.3333L 38,44.3333 Z M 31.6667,44.3333L 25.3333,44.3333L 25.3333,50.6667L 31.6667,50.6667L 31.6667,44.3333 Z M 44.3333,31.6667L 38,31.6667L 38,38L 44.3333,38L 44.3333,31.6667 Z M 38,31.6667L 38,25.3333L 31.6667,25.3333L 31.6666,31.6667L 38,31.6667 Z M 31.6666,31.6667L 25.3333,31.6667L 25.3333,38L 31.6667,38L 31.6666,31.6667 Z ">
                                <Path.OpacityMask>
                                    <LinearGradientBrush StartPoint="0.853553,0.853553" EndPoint="0.146447,0.146447">
                                        <GradientStop Color="#22FFFFFF" Offset="0"/>
                                        <GradientStop Color="#FFFFFFFF" Offset="1"/>
                                    </LinearGradientBrush>
                                </Path.OpacityMask>
                            </Path>
                            <Slider x:Name="TextOpacitySlider" Foreground="{Binding SolidColorBrush, ElementName=ColorPicker}" ValueChanged="TextOpacityChanged"
						    Value="1" Minimum="0.1" Maximum="1" SmallChange="0.2" LargeChange="0.1" Orientation="Vertical" Height="184" Width="62" Margin="-3,0,-3,0" VerticalAlignment="Top" Style="{StaticResource CustomSliderStyle}" />
                        </StackPanel>
                        <StackPanel>
                            <Path Width="28" Height="24" Margin="0,2,0,2" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 33.6585,44.381L 24.397,44.381L 22.0936,52.9919L 14.5596,52.9919L 24.397,21L 33.9944,21L 42.31,47.4041L 47.7438,29.9832L 54.7237,29.9832L 62.0513,53L 56.2942,53L 54.4794,46.7375L 47.7438,46.7375L 46.0686,53L 36.1538,52.9919L 33.6585,44.381 Z M 25.4527,39.1786L 32.6028,39.1786L 30.5873,32.3811L 29.7355,29.2915L 28.9557,26.2024L 28.8598,26.2024L 28.134,29.3193L 27.3722,32.4615L 25.4527,39.1786 Z M 48.5116,42.954L 53.7116,42.954L 52.2458,38.0104L 51.6264,35.7634L 51.0592,33.5168L 50.9894,33.5168L 50.4616,35.7836L 49.9075,38.0688L 48.5116,42.954 Z "/>
                            <Slider x:Name="TextSizeSlider" Foreground="{Binding SolidColorBrush, ElementName=ColorPicker}" ValueChanged="TextSizeChanged"
							    Value="48" Minimum="12" Maximum="152" SmallChange="2" LargeChange="2" Orientation="Vertical" Height="184" Width="62" Margin="-3,0,-3,0" VerticalAlignment="Top" Style="{StaticResource CustomSliderStyle}" />
                        </StackPanel>
                    </StackPanel>


                    <!-- buttons -->
                    <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                        <!-- font -->
                        <toolkit:ListPicker Width="126" Height="52" x:Name="FontPicker" ExpansionMode="FullScreenOnly" Header="{Binding LocalizedResources.FontsHeader, Source={StaticResource LocalizedStrings}}" DataContext="{StaticResource FontsViewModel}" ItemsSource="{Binding Fonts}"
                                                Style="{StaticResource CustomListPickerStyle}" HorizontalAlignment="Center">
                            <toolkit:ListPicker.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Height="50" Orientation="Horizontal" VerticalAlignment="Center">
                                        <Path Width="18" Height="21" Margin="0,0,6,2" Stretch="Fill" VerticalAlignment="Center" Fill="Black" Data="F1 M 29,58L 29,55.0833C 32.4978,55.0833 35,53.2083 35,49.25L 35,29C 35,25.9394 32.7481,25 29.6875,25C 26.6269,25 24.5,25.9394 24.5,29L 21,29L 21,20L 55,20L 55,29L 51.5,29C 51.5,25.9394 49.373,25 46.3125,25C 43.2519,25 41,25.9394 41,29L 41,49.25C 41,53.2083 43.5022,55.0833 47,55.0833L 47,58L 29,58 Z "/>
                                        <TextBlock Text="{Binding Name}" FontFamily="{Binding Font}" TextWrapping="Wrap" Width="96" Margin="2,0,-2,0" FontWeight="Bold" FontSize="16" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                                    </StackPanel>
                                </DataTemplate>
                            </toolkit:ListPicker.ItemTemplate>
                            <toolkit:ListPicker.FullModeItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="5">
                                        <TextBlock Text="{Binding Name}" FontFamily="{Binding Font}" VerticalAlignment="Center" Style="{StaticResource PhoneTextLargeStyle}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </toolkit:ListPicker.FullModeItemTemplate>
                        </toolkit:ListPicker>
                        <!-- alignment -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <ToggleButton x:Name="AlignmentLeft" Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Tag="Left" Checked="TextAlignmentToggled" Unchecked="TextAlignmentToggled">
                                <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 53,19L 19,19L 19,25L 53,25L 53,19 Z M 49,52L 19,52L 19,58L 49,58L 49,52 Z M 38,41L 19,41L 19,47L 38,47L 38,41 Z M 44,30L 19,30L 19,36L 44,36L 44,30 Z " />
                            </ToggleButton>
                            <ToggleButton x:Name="AlignmentCenter" Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Tag="Center" Checked="TextAlignmentToggled" Unchecked="TextAlignmentToggled">
                                <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 19,19L 57,19L 57,25L 19,25L 19,19 Z M 22,52L 54,52L 54,58L 22,58L 22,52 Z M 29,41L 47,41L 47,47L 29,47L 29,41 Z M 25,30L 51,30L 51,36L 25,36L 25,30 Z " />
                            </ToggleButton>
                            <ToggleButton x:Name="AlignmentRight" Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Tag="Right" Checked="TextAlignmentToggled" Unchecked="TextAlignmentToggled">
                                <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23,19L 57,19L 57,25L 23,25L 23,19 Z M 27,52L 57,52L 57,58L 27,58L 27,52 Z M 38,41L 57,41L 57,47L 38,47L 38,41 Z M 32,30L 57,30L 57,36L 32,36L 32,30 Z " />
                            </ToggleButton>
                        </StackPanel>
                        <!-- style/weight -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <ToggleButton x:Name="TextWeight" Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Checked="TextWeightToggled" Unchecked="TextWeightToggled">
                                <Path Width="17" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 27,58L 27,20L 38.9937,20C 42.6524,20 45.549,20.7945 47.6837,22.3835C 49.8184,23.9725 50.8857,26.0421 50.8857,28.5924C 50.8857,30.7243 50.2849,32.5776 49.0833,34.1524C 47.8816,35.7273 46.2205,36.8455 44.1,37.5071L 44.1,37.6174C 46.6559,37.9171 48.6973,38.8926 50.2241,40.5437C 51.7509,42.1949 52.5143,44.3409 52.5143,46.9817C 52.5143,50.2615 51.2448,52.9178 48.7058,54.9507C 46.1668,56.9835 42.9606,58 39.087,58L 27,58 Z M 33.0143,24.8857L 33.0143,35.7429L 37.5009,35.7429C 39.644,35.7429 41.3249,35.224 42.5435,34.1864C 43.7621,33.1487 44.3714,31.6799 44.3714,29.7799C 44.3714,26.5171 42.2452,24.8857 37.9929,24.8857L 33.0143,24.8857 Z M 33.0143,40.6286L 33.0143,53.1143L 38.7817,53.1143C 41.0832,53.1143 42.8616,52.5502 44.117,51.4221C 45.3723,50.294 46,48.7403 46,46.7612C 46,42.6728 43.3253,40.6286 37.9759,40.6286L 33.0143,40.6286 Z " />
                            </ToggleButton>
                            <ToggleButton x:Name="TextStyle" Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Checked="TextStyleToggled" Unchecked="TextStyleToggled">
                                <Path Width="12" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 47.9383,20L 47.2449,24.05L 43.4449,24.05L 37.8979,53.95L 41.6979,53.95L 41.0046,58L 28.0617,58L 28.7551,53.95L 32.5551,53.95L 38.102,24.05L 34.302,24.05L 34.9954,20L 47.9383,20 Z " />
                            </ToggleButton>
                        </StackPanel>
                        <!-- border -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <ToggleButton x:Name="TextBorder" Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Tag="Left" Checked="TextBorderToggled" Unchecked="TextBorderToggled">
                                <Grid>
                                    <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 16,41L 16,19L 60,19L 60,41L 16,41 Z M 20,23L 20,39L 56,39L 56,21L 20,21 Z "/>
                                    <Path Width="15" Height="17" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23.75,20.5833L 52.25,20.5833L 52.25,26.9167L 41.1667,26.9167L 41.1667,58.5833L 34.8333,58.5833L 34.8333,26.9167L 23.75,26.9167L 23.75,20.5833 Z " />
                                </Grid>
                            </ToggleButton>
                            <ToggleButton x:Name="TextBackgroundBorder" Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Tag="Center" Checked="TextBackgroundBorderToggled" Unchecked="TextBackgroundBorderToggled">
                                <Grid>
                                    <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Opacity="0.33" Data="F1 M 16,41L 16,19L 60,19L 60,41L 16,41 Z"/>
                                    <Path Width="15" Height="17" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23.75,20.5833L 52.25,20.5833L 52.25,26.9167L 41.1667,26.9167L 41.1667,58.5833L 34.8333,58.5833L 34.8333,26.9167L 23.75,26.9167L 23.75,20.5833 Z " />
                                </Grid>
                            </ToggleButton>
                        </StackPanel>
                    </StackPanel>
                </Grid>

                <Grid x:Name="ColorPreview" Margin="12,-32,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" IsHitTestVisible="False">
                    <Ellipse Width="67" Height="67" Fill="{StaticResource PhoneChromeBrush}"/>
                    <Ellipse Width="53" Height="53" Fill="White"/>
                    <Ellipse Height="1" Width="1" Fill="{Binding SolidColorBrush, ElementName=ColorPicker}" Opacity="{Binding Value, ElementName=OpacitySlider}" RenderTransformOrigin="0.5,0.5">
                        <Ellipse.RenderTransform>
                            <ScaleTransform ScaleX="{Binding Value, ElementName=ThicknessSlider}" ScaleY="{Binding Value, ElementName=ThicknessSlider}" />
                        </Ellipse.RenderTransform>
                    </Ellipse>
                </Grid>
            </Grid>

            <Grid x:Name="PenToolbarLandscape" Width="360" HorizontalAlignment="Right" Background="{StaticResource PhoneChromeBrush}" RenderTransformOrigin="0.5,0.5" Visibility="Collapsed">
                <Grid.RenderTransform>
                    <CompositeTransform TranslateX="600"/>
                </Grid.RenderTransform>
                <Grid.RowDefinitions>
                    <RowDefinition Height="260" />
                    <RowDefinition Height="220" />
                </Grid.RowDefinitions>
                <Button Grid.ColumnSpan="2" VerticalAlignment="Top" HorizontalAlignment="Left" Template="{StaticResource EmptyButtonControlTemplate}" Background="{StaticResource PhoneChromeBrush}" Tap="ClosedPenToobarTapped">
                    <Grid Margin="-44,0,0,0">
                        <Ellipse Width="67" Height="67" Fill="{StaticResource PhoneChromeBrush}"/>
                        <Path Width="22" Height="28" Margin="2" Stretch="Fill" Opacity="0.5" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 39.8307,37.6042L 36.6641,34.4375L 25.1849,23.3542L 35.4766,23.3542L 50.5182,37.6042L 35.4766,51.8542L 25.1849,51.8542L 36.6641,40.7708L 39.8307,37.6042 Z "/>
                    </Grid>
                </Button>

                <!-- pen mode -->
                <Grid Grid.Row="0" x:Name="PropertiesPenModeLandscape" Margin="40,0,0,0" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="142" />
                        <RowDefinition Height="118" />
                    </Grid.RowDefinitions>

                    <!-- sliders -->
                    <StackPanel Grid.Row="1">
                        <StackPanel Orientation="Horizontal">
                            <Path Width="28" Height="28" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 20.5833,55.4167L 49.0833,55.4167L 45.9167,52.25L 25.3333,52.25L 31.6667,49.0833L 25.3333,42.75L 22.1667,49.875C 22.1667,49.875 15.8333,55.4167 20.5833,55.4167 Z M 36.4166,47.5L 26.9166,38L 26.9166,41.1667L 33.25,47.5L 36.4166,47.5 Z M 28.8958,37.6042L 36.8125,45.5209C 38.3958,47.1042 42.75,42.75 42.75,42.75L 31.6666,31.6667C 26.9166,36.4167 28.8958,37.6042 28.8958,37.6042 Z M 44.3333,41.1667L 65.6868,16.8593C 63.2289,13.6452 60.224,10.8717 56.8112,8.67772L 33.25,30.0834L 44.3333,41.1667 Z "/>
                            <Slider x:Name="ThicknessSliderLandscape" Foreground="{Binding SolidColorBrush, ElementName=ColorPickerLandscape}" Margin="-4,0,0,-28"
							Value="{Binding Value, ElementName=ThicknessSlider, Mode=TwoWay}" Minimum="3" Maximum="45" SmallChange="1" LargeChange="1" Width="184" VerticalAlignment="Center" Style="{StaticResource CustomSliderStyle}" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Path Width="28" Height="28" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 19,19L 25.3333,19L 25.3333,25.3333L 31.6667,25.3333L 31.6667,19L 38,19L 38,25.3333L 44.3333,25.3333L 44.3333,19L 50.6667,19L 50.6667,25.3333L 57,25.3333L 57,31.6667L 50.6667,31.6667L 50.6667,38L 57,38L 57,44.3333L 50.6667,44.3333L 50.6667,50.6667L 57,50.6667L 57,57L 50.6667,57L 50.6667,50.6667L 44.3333,50.6667L 44.3333,57L 38,57L 38,50.6667L 31.6667,50.6667L 31.6667,57L 25.3333,57L 25.3333,50.6667L 19,50.6667L 19,44.3333L 25.3333,44.3333L 25.3333,38L 19,38L 19,31.6667L 25.3333,31.6667L 25.3333,25.3333L 19,25.3333L 19,19 Z M 50.6667,38L 44.3333,38L 44.3333,44.3333L 50.6667,44.3333L 50.6667,38 Z M 50.6667,25.3333L 44.3333,25.3333L 44.3333,31.6667L 50.6667,31.6667L 50.6667,25.3333 Z M 44.3333,44.3333L 38,44.3333L 38,50.6667L 44.3333,50.6667L 44.3333,44.3333 Z M 38,44.3333L 38,38L 31.6667,38L 31.6667,44.3333L 38,44.3333 Z M 31.6667,44.3333L 25.3333,44.3333L 25.3333,50.6667L 31.6667,50.6667L 31.6667,44.3333 Z M 44.3333,31.6667L 38,31.6667L 38,38L 44.3333,38L 44.3333,31.6667 Z M 38,31.6667L 38,25.3333L 31.6667,25.3333L 31.6666,31.6667L 38,31.6667 Z M 31.6666,31.6667L 25.3333,31.6667L 25.3333,38L 31.6667,38L 31.6666,31.6667 Z ">
                                <Path.OpacityMask>
                                    <LinearGradientBrush StartPoint="0.853553,0.853553" EndPoint="0.146447,0.146447">
                                        <GradientStop Color="#22FFFFFF" Offset="0"/>
                                        <GradientStop Color="#FFFFFFFF" Offset="1"/>
                                    </LinearGradientBrush>
                                </Path.OpacityMask>
                            </Path>
                            <Slider x:Name="OpacitySliderLandscape" Foreground="{Binding SolidColorBrush, ElementName=ColorPickerLandscape}" Margin="-4,0,0,-28"
							Value="{Binding Value, ElementName=OpacitySlider, Mode=TwoWay}" Minimum="0.2" Maximum="1" SmallChange="0.1" LargeChange="0.1" Width="184" VerticalAlignment="Center" Style="{StaticResource CustomSliderStyle}" />
                        </StackPanel>
                    </StackPanel>

                    <!-- buttons -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal"  VerticalAlignment="Center">
                        <StackPanel>
                            <ToggleButton Style="{StaticResource CustomToggleButtonStyle}" Tag="Normal" IsChecked="{Binding IsChecked, ElementName=NormalPen, Mode=TwoWay}">
                                <Path Width="28" Height="28" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 58,18C 58,18 33,24 33,33C 33,42 46,41 46,45C 46,49 22,55 18,56L 19,59C 19,59 49,53 49,45C 49,37 36,40 36,33C 36,26 59,21 59,21L 58,18 Z " StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                            </ToggleButton>
                            <ToggleButton Style="{StaticResource CustomToggleButtonStyle}" Tag="Arrow" IsChecked="{Binding IsChecked, ElementName=ArrowPen, Mode=TwoWay}">
                                <Path Width="28" Height="24" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23,55L 18,55L 18,50L 21,50L 53,24L 53,21L 58,21L 58,26L 55,26L 23,52L 23,55 Z M 54,22L 54,25L 57,25L 57,22L 54,22 Z M 19,51L 19,54L 22,54L 22,51L 19,51 Z M 38,25 52,25 53,24 53,22 38,22 Z M 55,26 54,27 54,41 57,41 57,26 Z" StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                            </ToggleButton>
                        </StackPanel>
                        <StackPanel>
                            <ToggleButton Style="{StaticResource CustomToggleButtonStyle}" Tag="Line" IsChecked="{Binding IsChecked, ElementName=LinePen, Mode=TwoWay}">
                                <Path Width="28" Height="24" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23,55L 18,55L 18,50L 21,50L 53,24L 53,21L 58,21L 58,26L 55,26L 23,52L 23,55 Z M 54,22L 54,25L 57,25L 57,22L 54,22 Z M 19,51L 19,54L 22,54L 22,51L 19,51 Z " StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                            </ToggleButton>
                            <ToggleButton Style="{StaticResource CustomToggleButtonStyle}" Tag="Circle" IsChecked="{Binding IsChecked, ElementName=CirclePen, Mode=TwoWay}">
                                <Path Width="28" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 38,36C 36.8954,36 36,36.8954 36,38C 36,39.1046 36.8954,40 38,40C 39.1046,40 40,39.1046 40,38C 40,36.8954 39.1046,36 38,36 Z M 38,34C 40.2091,34 42,35.7909 42,38C 42,40.2091 40.2091,42 38,42C 35.7909,42 34,40.2091 34,38C 34,35.7909 35.7909,34 38,34 Z M 57.75,36C 56.6454,36 55.75,36.8954 55.75,38C 55.75,39.1046 56.6454,40 57.75,40C 58.8546,40 59.75,39.1046 59.75,38C 59.75,36.8954 58.8546,36 57.75,36 Z M 61.75,38C 61.75,39.9038 60.4199,41.497 58.6383,41.901C 56.8098,51.635 48.265,59 38,59C 26.402,59 17,49.598 17,38C 17,26.402 26.402,17 38,17C 48.265,17 56.8098,24.365 58.6383,34.099C 60.4199,34.503 61.75,36.0962 61.75,38 Z M 53.75,38C 53.75,36.5505 54.521,35.281 55.6754,34.5794C 54.0776,26.2741 46.7715,20 38,20C 28.0589,20 20,28.0589 20,38C 20,47.9411 28.0589,56 38,56C 46.7715,56 54.0776,49.7259 55.6754,41.4206C 54.521,40.719 53.75,39.4496 53.75,38 Z " StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                            </ToggleButton>
                        </StackPanel>
                        <ToggleButton VerticalAlignment="Center" Style="{StaticResource CustomToggleButtonStyle}" Tag="Rectangle" IsChecked="{Binding IsChecked, ElementName=RectanglePen, Mode=TwoWay}">
                            <Path Width="28" Height="23" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23,28L 23,29L 22,29L 22,47L 23,47L 23,48L 53,48L 53,47L 54,47L 54,29L 53,29L 53,28L 23,28 Z M 58,47L 58,52L 53,52L 53,51L 23,51L 23,52L 18,52L 18,47L 19,47L 19,29L 18,29L 18,24L 23,24L 23,25L 53,25L 53,24L 58,24L 58,29L 57,29L 57,47L 58,47 Z M 19,25L 19,28L 22,28L 22,25L 19,25 Z M 54,25L 54,28L 57,28L 57,25L 54,25 Z M 19,48L 19,51L 22,51L 22,48L 19,48 Z M 54,48L 54,51L 57,51L 57,48L 54,48 Z " StrokeThickness="0.5" Stroke="{StaticResource PhoneForegroundBrush}"/>
                        </ToggleButton>
                    </StackPanel>
                </Grid>

                <!-- text mode -->
                <Grid x:Name="PropertiesTextModeLandscape" Grid.Row="0" Margin="40,0,0,0" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="142" />
                        <RowDefinition Height="118" />
                    </Grid.RowDefinitions>

                    <!-- sliders -->
                    <StackPanel Grid.Row="1" >
                        <StackPanel Orientation="Horizontal">
                            <Path Width="28" Height="24" Margin="0,2,0,2" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 33.6585,44.381L 24.397,44.381L 22.0936,52.9919L 14.5596,52.9919L 24.397,21L 33.9944,21L 42.31,47.4041L 47.7438,29.9832L 54.7237,29.9832L 62.0513,53L 56.2942,53L 54.4794,46.7375L 47.7438,46.7375L 46.0686,53L 36.1538,52.9919L 33.6585,44.381 Z M 25.4527,39.1786L 32.6028,39.1786L 30.5873,32.3811L 29.7355,29.2915L 28.9557,26.2024L 28.8598,26.2024L 28.134,29.3193L 27.3722,32.4615L 25.4527,39.1786 Z M 48.5116,42.954L 53.7116,42.954L 52.2458,38.0104L 51.6264,35.7634L 51.0592,33.5168L 50.9894,33.5168L 50.4616,35.7836L 49.9075,38.0688L 48.5116,42.954 Z "/>
                            <Slider x:Name="TextSizeSliderLandscape" Foreground="{Binding SolidColorBrush, ElementName=ColorPickerLandscape}" ValueChanged="TextSizeChanged"
							    Value="{Binding Value, ElementName=TextSizeSlider, Mode=TwoWay}" Minimum="12" Maximum="152" SmallChange="2" LargeChange="2" Width="184" VerticalAlignment="Center" Margin="-4,0,0,-28" Style="{StaticResource CustomSliderStyle}" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Path Width="28" Height="28" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 19,19L 25.3333,19L 25.3333,25.3333L 31.6667,25.3333L 31.6667,19L 38,19L 38,25.3333L 44.3333,25.3333L 44.3333,19L 50.6667,19L 50.6667,25.3333L 57,25.3333L 57,31.6667L 50.6667,31.6667L 50.6667,38L 57,38L 57,44.3333L 50.6667,44.3333L 50.6667,50.6667L 57,50.6667L 57,57L 50.6667,57L 50.6667,50.6667L 44.3333,50.6667L 44.3333,57L 38,57L 38,50.6667L 31.6667,50.6667L 31.6667,57L 25.3333,57L 25.3333,50.6667L 19,50.6667L 19,44.3333L 25.3333,44.3333L 25.3333,38L 19,38L 19,31.6667L 25.3333,31.6667L 25.3333,25.3333L 19,25.3333L 19,19 Z M 50.6667,38L 44.3333,38L 44.3333,44.3333L 50.6667,44.3333L 50.6667,38 Z M 50.6667,25.3333L 44.3333,25.3333L 44.3333,31.6667L 50.6667,31.6667L 50.6667,25.3333 Z M 44.3333,44.3333L 38,44.3333L 38,50.6667L 44.3333,50.6667L 44.3333,44.3333 Z M 38,44.3333L 38,38L 31.6667,38L 31.6667,44.3333L 38,44.3333 Z M 31.6667,44.3333L 25.3333,44.3333L 25.3333,50.6667L 31.6667,50.6667L 31.6667,44.3333 Z M 44.3333,31.6667L 38,31.6667L 38,38L 44.3333,38L 44.3333,31.6667 Z M 38,31.6667L 38,25.3333L 31.6667,25.3333L 31.6666,31.6667L 38,31.6667 Z M 31.6666,31.6667L 25.3333,31.6667L 25.3333,38L 31.6667,38L 31.6666,31.6667 Z ">
                                <Path.OpacityMask>
                                    <LinearGradientBrush StartPoint="0.853553,0.853553" EndPoint="0.146447,0.146447">
                                        <GradientStop Color="#22FFFFFF" Offset="0"/>
                                        <GradientStop Color="#FFFFFFFF" Offset="1"/>
                                    </LinearGradientBrush>
                                </Path.OpacityMask>
                            </Path>
                            <Slider x:Name="TextOpacitySliderLandscape" Foreground="{Binding SolidColorBrush, ElementName=ColorPickerLandscape}" Margin="-4,0,0,-28"
							    Value="{Binding Value, ElementName=TextOpacitySlider, Mode=TwoWay}" Minimum="0.2" Maximum="1" SmallChange="0.1" LargeChange="0.1" Width="184" VerticalAlignment="Center" Style="{StaticResource CustomSliderStyle}" />
                        </StackPanel>
                    </StackPanel>


                    <!-- buttons -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="-4,0,0,0">
                        <StackPanel VerticalAlignment="Center">
                            <!-- font -->
                            <toolkit:ListPicker Width="122" Height="52" x:Name="FontPickerLandscape" ExpansionMode="FullScreenOnly" Header="{Binding LocalizedResources.FontsHeader, Source={StaticResource LocalizedStrings}}" DataContext="{StaticResource FontsViewModel}" ItemsSource="{Binding Fonts}"
                                                    Style="{StaticResource CustomListPickerStyle}" HorizontalAlignment="Center">
                                <toolkit:ListPicker.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Height="50" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Path Width="18" Height="21" Margin="0,0,6,2" Stretch="Fill" VerticalAlignment="Center" Fill="Black" Data="F1 M 29,58L 29,55.0833C 32.4978,55.0833 35,53.2083 35,49.25L 35,29C 35,25.9394 32.7481,25 29.6875,25C 26.6269,25 24.5,25.9394 24.5,29L 21,29L 21,20L 55,20L 55,29L 51.5,29C 51.5,25.9394 49.373,25 46.3125,25C 43.2519,25 41,25.9394 41,29L 41,49.25C 41,53.2083 43.5022,55.0833 47,55.0833L 47,58L 29,58 Z "/>
                                            <TextBlock Text="{Binding Name}" FontFamily="{Binding Font}" TextWrapping="Wrap" Width="96" Margin="2,0,-2,0" FontWeight="Bold" FontSize="16" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </toolkit:ListPicker.ItemTemplate>
                                <toolkit:ListPicker.FullModeItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" Margin="5">
                                            <TextBlock Text="{Binding Name}" FontFamily="{Binding Font}" VerticalAlignment="Center" Style="{StaticResource PhoneTextLargeStyle}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </toolkit:ListPicker.FullModeItemTemplate>
                            </toolkit:ListPicker>
                            <!-- alignment -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <ToggleButton Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Tag="Left" IsChecked="{Binding ElementName=AlignmentLeft, Path=IsChecked, Mode=TwoWay}">
                                    <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 53,19L 19,19L 19,25L 53,25L 53,19 Z M 49,52L 19,52L 19,58L 49,58L 49,52 Z M 38,41L 19,41L 19,47L 38,47L 38,41 Z M 44,30L 19,30L 19,36L 44,36L 44,30 Z " />
                                </ToggleButton>
                                <ToggleButton Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Tag="Center" IsChecked="{Binding ElementName=AlignmentCenter, Path=IsChecked, Mode=TwoWay}">
                                    <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 19,19L 57,19L 57,25L 19,25L 19,19 Z M 22,52L 54,52L 54,58L 22,58L 22,52 Z M 29,41L 47,41L 47,47L 29,47L 29,41 Z M 25,30L 51,30L 51,36L 25,36L 25,30 Z " />
                                </ToggleButton>
                                <ToggleButton Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" Tag="Right" IsChecked="{Binding ElementName=AlignmentRight, Path=IsChecked, Mode=TwoWay}">
                                    <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23,19L 57,19L 57,25L 23,25L 23,19 Z M 27,52L 57,52L 57,58L 27,58L 27,52 Z M 38,41L 57,41L 57,47L 38,47L 38,41 Z M 32,30L 57,30L 57,36L 32,36L 32,30 Z " />
                                </ToggleButton>
                            </StackPanel>
                        </StackPanel>

                        <StackPanel VerticalAlignment="Center" Margin="0,10,0,0">
                            <!-- style/weight -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <ToggleButton Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" IsChecked="{Binding ElementName=TextWeight, Path=IsChecked, Mode=TwoWay}">
                                    <Path Width="17" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 27,58L 27,20L 38.9937,20C 42.6524,20 45.549,20.7945 47.6837,22.3835C 49.8184,23.9725 50.8857,26.0421 50.8857,28.5924C 50.8857,30.7243 50.2849,32.5776 49.0833,34.1524C 47.8816,35.7273 46.2205,36.8455 44.1,37.5071L 44.1,37.6174C 46.6559,37.9171 48.6973,38.8926 50.2241,40.5437C 51.7509,42.1949 52.5143,44.3409 52.5143,46.9817C 52.5143,50.2615 51.2448,52.9178 48.7058,54.9507C 46.1668,56.9835 42.9606,58 39.087,58L 27,58 Z M 33.0143,24.8857L 33.0143,35.7429L 37.5009,35.7429C 39.644,35.7429 41.3249,35.224 42.5435,34.1864C 43.7621,33.1487 44.3714,31.6799 44.3714,29.7799C 44.3714,26.5171 42.2452,24.8857 37.9929,24.8857L 33.0143,24.8857 Z M 33.0143,40.6286L 33.0143,53.1143L 38.7817,53.1143C 41.0832,53.1143 42.8616,52.5502 44.117,51.4221C 45.3723,50.294 46,48.7403 46,46.7612C 46,42.6728 43.3253,40.6286 37.9759,40.6286L 33.0143,40.6286 Z " />
                                </ToggleButton>
                                <ToggleButton Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" IsChecked="{Binding ElementName=TextStyle, Path=IsChecked, Mode=TwoWay}">
                                    <Path Width="12" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 47.9383,20L 47.2449,24.05L 43.4449,24.05L 37.8979,53.95L 41.6979,53.95L 41.0046,58L 28.0617,58L 28.7551,53.95L 32.5551,53.95L 38.102,24.05L 34.302,24.05L 34.9954,20L 47.9383,20 Z " />
                                </ToggleButton>
                            </StackPanel>
                            <!-- border -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <ToggleButton Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" IsChecked="{Binding ElementName=TextBorder, Path=IsChecked, Mode=TwoWay}">
                                    <Grid>
                                        <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 16,41L 16,19L 60,19L 60,41L 16,41 Z M 20,23L 20,39L 56,39L 56,21L 20,21 Z "/>
                                        <Path Width="15" Height="17" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23.75,20.5833L 52.25,20.5833L 52.25,26.9167L 41.1667,26.9167L 41.1667,58.5833L 34.8333,58.5833L 34.8333,26.9167L 23.75,26.9167L 23.75,20.5833 Z " />
                                    </Grid>
                                </ToggleButton>
                                <ToggleButton Width="38" Height="38" Style="{StaticResource CustomToggleButtonStyle}" IsChecked="{Binding ElementName=TextBackgroundBorder, Path=IsChecked, Mode=TwoWay}">
                                    <Grid>
                                        <Path Width="26" Height="26" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Opacity="0.33" Data="F1 M 16,41L 16,19L 60,19L 60,41L 16,41 Z"/>
                                        <Path Width="15" Height="17" Stretch="Fill" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 23.75,20.5833L 52.25,20.5833L 52.25,26.9167L 41.1667,26.9167L 41.1667,58.5833L 34.8333,58.5833L 34.8333,26.9167L 23.75,26.9167L 23.75,20.5833 Z " />
                                    </Grid>
                                </ToggleButton>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Grid>

                <!-- color -->
                <StackPanel Grid.Row="1" VerticalAlignment="Center" Margin="16,0,0,0">
                    <StackPanel Orientation="Horizontal" Margin="20,8,20,-32">
                        <Rectangle Fill="{Binding Fill, ElementName=ColorHistory1}" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle Fill="{Binding Fill, ElementName=ColorHistory2}" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle Fill="{Binding Fill, ElementName=ColorHistory3}" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle Fill="{Binding Fill, ElementName=ColorHistory4}" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle Fill="{Binding Fill, ElementName=ColorHistory5}" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                        <Rectangle Fill="{Binding Fill, ElementName=ColorHistory6}" Width="26" Height="26" Margin="4" Tap="HistoryColorSelected" />
                    </StackPanel>
                    <StackPanel Margin="12">
                        <coding:ColorPicker x:Name="ColorPickerLandscape" Color="{Binding Color, ElementName=ColorPicker, Mode=TwoWay}" Height="198" Width="164" Margin="28,12,0,0" HorizontalAlignment="Left"
                                            Style="{StaticResource CustomColorPickerStyle}" ColorChanged="ColorPickerChanged" RenderTransformOrigin="0.5,0.5">
                            <coding:ColorPicker.RenderTransform>
                                <RotateTransform Angle="-90" />
                            </coding:ColorPicker.RenderTransform>
                        </coding:ColorPicker>
                    </StackPanel>
                </StackPanel>


                <Grid x:Name="ColorPreviewLandscape" Grid.RowSpan="2" Margin="-32,0,0,12" HorizontalAlignment="Left" VerticalAlignment="Bottom" IsHitTestVisible="False">
                    <Ellipse Width="67" Height="67" Fill="{StaticResource PhoneChromeBrush}"/>
                    <Ellipse Width="53" Height="53" Fill="White"/>
                    <Ellipse Height="1" Width="1" Fill="{Binding SolidColorBrush, ElementName=ColorPickerLandscape}" Opacity="{Binding Value, ElementName=OpacitySliderLandscape}" RenderTransformOrigin="0.5,0.5">
                        <Ellipse.RenderTransform>
                            <ScaleTransform ScaleX="{Binding Value, ElementName=ThicknessSliderLandscape}" ScaleY="{Binding Value, ElementName=ThicknessSliderLandscape}" />
                        </Ellipse.RenderTransform>
                    </Ellipse>
                </Grid>
            </Grid>

            <!-- text options -->
            <StackPanel x:Name="TextOptions" VerticalAlignment="Top" HorizontalAlignment="Center" Orientation="Horizontal" Background="#01000000" Visibility="Collapsed" Opacity="0">
                <StackPanel.RenderTransform>
                    <TranslateTransform Y="-1000" />
                </StackPanel.RenderTransform>
                <Button Template="{StaticResource EmptyButtonControlTemplate}"
                    Click="TextOptionsEditClicked">
                    <Grid>
                        <Ellipse Width="62" Height="62" Fill="{StaticResource PhoneChromeBrush}"/>
                        <Path Width="28" Height="28" Margin="2" Stretch="Fill" Opacity="0.5" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 53.2929,21.2929L 54.7071,22.7071C 56.4645,24.4645 56.4645,27.3137 54.7071,29.0711L 52.2323,31.5459L 44.4541,23.7677L 46.9289,21.2929C 48.6863,19.5355 51.5355,19.5355 53.2929,21.2929 Z M 31.7262,52.052L 23.948,44.2738L 43.0399,25.182L 50.818,32.9601L 31.7262,52.052 Z M 23.2409,47.1023L 28.8977,52.7591L 21.0463,54.9537L 23.2409,47.1023 Z "/>
                    </Grid>
                </Button>
                <Button Template="{StaticResource EmptyButtonControlTemplate}"
                    Click="TextOptionsDeleteClicked">
                    <Grid>
                        <Ellipse Width="62" Height="62" Fill="{StaticResource PhoneChromeBrush}"/>
                        <Path Width="22" Height="28" Margin="2" Stretch="Fill" Opacity="0.5" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 25.3333,23.75L 50.6667,23.75C 51.5411,23.75 51.8541,27.3125 51.8541,27.3125L 24.1458,27.3125C 24.1458,27.3125 24.4589,23.75 25.3333,23.75 Z M 35.625,19.7917L 40.375,19.7917C 40.8122,19.7917 41.9583,20.9378 41.9583,21.375C 41.9583,21.8122 40.8122,22.9584 40.375,22.9584L 35.625,22.9584C 35.1878,22.9584 34.0416,21.8122 34.0416,21.375C 34.0416,20.9378 35.1878,19.7917 35.625,19.7917 Z M 27.7083,28.5L 48.2916,28.5C 49.1661,28.5 49.875,29.2089 49.875,30.0834L 48.2916,53.8334C 48.2916,54.7078 47.5828,55.4167 46.7083,55.4167L 29.2917,55.4167C 28.4172,55.4167 27.7083,54.7078 27.7083,53.8334L 26.125,30.0834C 26.125,29.2089 26.8339,28.5 27.7083,28.5 Z M 30.0833,31.6667L 30.4792,52.25L 33.25,52.25L 32.8542,31.6667L 30.0833,31.6667 Z M 36.4167,31.6667L 36.4167,52.25L 39.5833,52.25L 39.5833,31.6667L 36.4167,31.6667 Z M 43.1458,31.6667L 42.75,52.25L 45.5208,52.25L 45.9167,31.6667L 43.1458,31.6667 Z "/>
                    </Grid>
                </Button>
                <RepeatButton Template="{StaticResource EmptyButtonControlTemplate}" Interval="150"
                    Click="TextOptionsRotateClicked">
                    <Grid>
                        <Ellipse Width="62" Height="62" Fill="{StaticResource PhoneChromeBrush}"/>
                        <Path Width="28" Height="28" Margin="2" Stretch="Fill" Opacity="0.5" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 57,57L 42,57L 42,42L 47.1924,47.1924C 49.5449,44.8399 51,41.5899 51,38C 51,30.8203 45.1797,25 38,25C 30.8203,25 25,30.8203 25,38C 25,42.6137 27.4035,46.6661 31.0266,48.9734L 26.7138,53.2862C 22.0342,49.8254 19,44.2671 19,38C 19,27.5066 27.5066,19 38,19C 48.4934,19 57,27.5066 57,38C 57,43.2467 54.8734,47.9967 51.435,51.435L 57,57 Z "/>
                    </Grid>
                </RepeatButton>
            </StackPanel>
            <StackPanel x:Name="TextOptionsLandscape" VerticalAlignment="Center" HorizontalAlignment="Left" Background="#01000000" Visibility="Collapsed" Opacity="0" >
                <StackPanel.RenderTransform>
                    <TranslateTransform X="-1000" />
                </StackPanel.RenderTransform>
                <RepeatButton Template="{StaticResource EmptyButtonControlTemplate}" Interval="150"
                    Click="TextOptionsRotateClicked">
                    <Grid>
                        <Ellipse Width="62" Height="62" Fill="{StaticResource PhoneChromeBrush}"/>
                        <Path Width="28" Height="28" Margin="2" Stretch="Fill" Opacity="0.5" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 57,57L 42,57L 42,42L 47.1924,47.1924C 49.5449,44.8399 51,41.5899 51,38C 51,30.8203 45.1797,25 38,25C 30.8203,25 25,30.8203 25,38C 25,42.6137 27.4035,46.6661 31.0266,48.9734L 26.7138,53.2862C 22.0342,49.8254 19,44.2671 19,38C 19,27.5066 27.5066,19 38,19C 48.4934,19 57,27.5066 57,38C 57,43.2467 54.8734,47.9967 51.435,51.435L 57,57 Z "/>
                    </Grid>
                </RepeatButton>
                <Button Template="{StaticResource EmptyButtonControlTemplate}"
                    Click="TextOptionsDeleteClicked">
                    <Grid>
                        <Ellipse Width="62" Height="62" Fill="{StaticResource PhoneChromeBrush}"/>
                        <Path Width="22" Height="28" Margin="2" Stretch="Fill" Opacity="0.5" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 25.3333,23.75L 50.6667,23.75C 51.5411,23.75 51.8541,27.3125 51.8541,27.3125L 24.1458,27.3125C 24.1458,27.3125 24.4589,23.75 25.3333,23.75 Z M 35.625,19.7917L 40.375,19.7917C 40.8122,19.7917 41.9583,20.9378 41.9583,21.375C 41.9583,21.8122 40.8122,22.9584 40.375,22.9584L 35.625,22.9584C 35.1878,22.9584 34.0416,21.8122 34.0416,21.375C 34.0416,20.9378 35.1878,19.7917 35.625,19.7917 Z M 27.7083,28.5L 48.2916,28.5C 49.1661,28.5 49.875,29.2089 49.875,30.0834L 48.2916,53.8334C 48.2916,54.7078 47.5828,55.4167 46.7083,55.4167L 29.2917,55.4167C 28.4172,55.4167 27.7083,54.7078 27.7083,53.8334L 26.125,30.0834C 26.125,29.2089 26.8339,28.5 27.7083,28.5 Z M 30.0833,31.6667L 30.4792,52.25L 33.25,52.25L 32.8542,31.6667L 30.0833,31.6667 Z M 36.4167,31.6667L 36.4167,52.25L 39.5833,52.25L 39.5833,31.6667L 36.4167,31.6667 Z M 43.1458,31.6667L 42.75,52.25L 45.5208,52.25L 45.9167,31.6667L 43.1458,31.6667 Z "/>
                    </Grid>
                </Button>
                <Button Template="{StaticResource EmptyButtonControlTemplate}"
                    Click="TextOptionsEditClicked">
                    <Grid>
                        <Ellipse Width="62" Height="62" Fill="{StaticResource PhoneChromeBrush}"/>
                        <Path Width="28" Height="28" Margin="2" Stretch="Fill" Opacity="0.5" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 53.2929,21.2929L 54.7071,22.7071C 56.4645,24.4645 56.4645,27.3137 54.7071,29.0711L 52.2323,31.5459L 44.4541,23.7677L 46.9289,21.2929C 48.6863,19.5355 51.5355,19.5355 53.2929,21.2929 Z M 31.7262,52.052L 23.948,44.2738L 43.0399,25.182L 50.818,32.9601L 31.7262,52.052 Z M 23.2409,47.1023L 28.8977,52.7591L 21.0463,54.9537L 23.2409,47.1023 Z "/>
                    </Grid>
                </Button>
            </StackPanel>
        </Grid>
        
        <Grid x:Name="ZoomingPopup" Visibility="Collapsed" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5">
            <Grid.Resources>
                  <vm:ThemedImageSourceViewModel x:Key="ImageViewModel" />
              </Grid.Resources>
            <Grid.RenderTransform>
                <CompositeTransform TranslateY="-400"/>
            </Grid.RenderTransform>
            <Grid>
                <Rectangle Fill="{StaticResource PhoneChromeBrush}" />
                <Button VerticalAlignment="Bottom" HorizontalAlignment="Right" Template="{StaticResource EmptyButtonControlTemplate}" Background="{StaticResource PhoneChromeBrush}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <eim:ControlStoryboardAction Storyboard="{StaticResource CloseZoomingPopup}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <Grid Margin="0,0,0,-44">
                        <Ellipse Width="67" Height="67" Fill="{StaticResource PhoneChromeBrush}"/>
                        <Path Width="28" Height="22" Margin="2" Stretch="Fill" Opacity="0.5" Fill="{StaticResource PhoneForegroundBrush}" Data="F1 M 37.8516,35.625L 34.6849,38.7917L 23.6016,50.2708L 23.6016,39.9792L 37.8516,24.9375L 52.1016,39.9792L 52.1016,50.2708L 41.0182,38.7917L 37.8516,35.625 Z "/>
                    </Grid>
                </Button>
            </Grid>
            <Grid Margin="12,48,12,24"
                  DataContext="{StaticResource ImageViewModel}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="128" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Image Grid.Column="0" Source="{Binding PinchImage}" Margin="6" VerticalAlignment="Center" />
                <StackPanel Grid.Column="1">
                    <TextBlock Text="{Binding LocalizedResources.ZoomPopupTitle, Source={StaticResource LocalizedStrings}}" Style="{StaticResource PhoneTextLargeStyle}" />
                    <TextBlock Text="{Binding LocalizedResources.ZoomPopupText, Source={StaticResource LocalizedStrings}}" TextWrapping="Wrap" Style="{StaticResource PhoneTextNormalStyle}" />
                </StackPanel>
            </Grid>
		</Grid>

        <Grid x:Name="SavingPopup" Visibility="Collapsed">
            <Rectangle Fill="{StaticResource PhoneBackgroundBrush}" Opacity="0.5" />
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200" Margin="6"/>
                <TextBlock Text="{Binding LocalizedResources.SavingPicuture, Source={StaticResource LocalizedStrings}}" TextAlignment="Center" />
            </StackPanel>
        </Grid>
    </Grid>

</phone:PhoneApplicationPage>